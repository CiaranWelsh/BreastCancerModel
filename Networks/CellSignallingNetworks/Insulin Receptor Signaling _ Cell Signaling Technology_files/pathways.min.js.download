function loadXMLDoc(e,t){window.XMLHttpRequest?xhttp=new XMLHttpRequest:xhttp=new ActiveXObject("Microsoft.XMLHTTP"),xhttp.open("GET",e,!0),xhttp.send(),xhttp.onreadystatechange=function(){4==xhttp.readyState&&200==xhttp.status&&build_pathway(xhttp.responseXML,t)}}function build_pathway(e,t){document.getElementById("pathway-node-container").innerHTML="";var o=e.querySelector('pathway[shortName="'+t+'"]');if(!o)return $("#pathway-node-container").text("We are unable to display this pathway at this time, please check back later."),$("#pathway-node-container").css("color","red"),$("#pathway-node-container").css("font-size","22px"),$(".overlay").hide(),void $(".overlay-button").hide();var n=document.getElementById("pathway-grey"),a="//media.cellsignal.com/www/images/science/pathways/pathway-"+t+"/"+t+"-no-nodes.gif";n.style.backgroundImage="url('"+a+"')",pathwayHeader(o.getAttribute("longName"),null,o.getAttribute("pdfName"),o.getAttribute("refUrl"));for(var i=o.getElementsByTagName("protein"),s=o.getAttribute("longName"),r=0,c=i.length;r<c;r++){create_nodes(i[r].getAttribute("top"),i[r].getAttribute("left"),i[r].getAttribute("cst_search"),i[r].getAttribute("psp_search"),i[r].childNodes[0].nodeValue,t,s)}}function pathwayHeader(e,t,o,n){var a=document.getElementById("pathway_pdf");a&&(a.onclick=function(){trackEvent_pathwayDownload(e,o)})}function create_nodes(e,t,o,n,a,i,s){var r=document.getElementById("pathway-node-container"),c=document.createElement("img");c.setAttribute("src","//media.cellsignal.com/www/images/science/pathways/pathway-"+i+"/"+a+".png");var l="cst"+e+t;if(c.setAttribute("id",l),c.style.position="absolute",c.style.left=t*_scale+"px",c.style.top=e*_scale+"px",r.appendChild(c),n||o){var d=document.getElementById(l);d.onmouseover=function(){cstpathway.isMobileOrTabletDevice()||mouseoverArea(d.id,t,e)},d.onmouseout=function(){cstpathway.isMobileOrTabletDevice()||mouseoutArea()},d.onclick=function(r){mouseoutArea(),nodePopover.handleNodeClick(r,e,t,o,n,a,i,s)}}else c.style.cursor="default"}function mouseoverArea(e,t,o){var n=document.getElementById(e),a=n.clientWidth*_scale,i=n.clientHeight*_scale,s=document.getElementById("glowing");s.style.display="block",s.style.position="absolute",s.style.left=t*_scale-13+"px",s.style.top=o*_scale-13+"px",s.style.width=a+26+"px",s.style.height=i+26+"px";var r=document.getElementById("glowing2");r.style.left=t*_scale-13+"px",r.style.top=o*_scale-13+"px",r.style.width=a+26+"px",r.style.height=i+26+"px"}function mouseoutArea(){document.getElementById("glowing").style.display="none"}function NodePopover(){function e(){""!=l&&(ga&&ga("send","event","CST-linked Pathway","Search CST",p+" - "+l),setTimeout(function(){window.location.href="/browse/?Ntk=Products&N=4294956287&Ntt="+l},500))}function t(){if(""!=d)if(ga&&ga("send","event","PSP-linked Pathway","Search PSP",p+" - "+d),-1!==d.indexOf(";")){var e=d.split(";").join("\n");setTimeout(function(){navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)?o("https://www.phosphosite.org/proteinSearchSubmitAction.action",{onlyPSPaccessions:!0,accessionIds:e},"_self"):o("https://www.phosphosite.org/proteinSearchSubmitAction.action",{onlyPSPaccessions:!0,accessionIds:e},"_blank")},500)}else setTimeout(function(){navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)?o("https://www.phosphosite.org/proteinSearchSubmitAction.action",{onlyPSPaccessions:!0,accessionIds:d},"_self"):o("https://www.phosphosite.org/proteinSearchSubmitAction.action",{onlyPSPaccessions:!0,accessionIds:d},"_blank")},500)}function o(e,t,o){var n=document.createElement("form");n.method="post",n.action=e,n.setAttribute("target",o);for(var a in t){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",a),i.setAttribute("value",t[a]),n.appendChild(i)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)}var n=this,a=document.getElementById("nodePopover"),i=document.getElementById("selectedNode"),s=document.getElementById("glowing2"),r=document.querySelector("#nodePopover .popover-content .products-link a")||document.querySelector("#nodePopover .popover-content .products-link p"),c=document.querySelector("#nodePopover .popover-content .phosphosite-link a")||document.querySelector("#nodePopover .popover-content .phosphosite-link p"),l="",d="",p="";n.init=function(){r.addEventListener("click",function(){e()}),c.addEventListener("click",function(){t()}),document.querySelector("#nodePopover div.popover-title > i").addEventListener("click",function(){n.closePopover()})},n.closePopover=function(){$("#cst-wrapper .wrapper-parent").removeClass("node-selected"),a.style.display="none",s.style.display="none"},n.handleNodeClick=function(e,t,o,u,m,h,w,g){i.setAttribute("src","//media.cellsignal.com/www/images/science/pathways/pathway-"+w+"/"+h+".png"),i.style.left=o*_scale+"px",i.style.top=t*_scale+"px",$("#cst-wrapper .wrapper-parent").addClass("node-selected"),u?(l=u,r.className="active"):(l="",r.className=""),m?(d=m,c.className="active"):(d="",c.className=""),p=g,a.style.display="block",s.style.display="none",n.repositionPopover()},n.repositionPopover=function(){var e=0,t=document.querySelector("main").offsetTop,o=document.querySelector("main").offsetLeft,n=i.getBoundingClientRect(),s=n.x?n.x:n.left,r=n.y?n.y:n.top,c=s-a.clientWidth/2+n.width/2-o,l=r-a.clientHeight-t;if(c<5&&(e=(5-c)/a.clientWidth*100,c=5),c+a.clientWidth+10>window.innerWidth){var d=c+a.clientWidth+10-window.innerWidth;c-=d,e=d/a.clientWidth*-100}a.style.left=c+"px";l=Math.max(l,10-t),l=Math.min(l,window.innerHeight-t-10-5-a.clientHeight),cstpathway.isZoomedMode()||(l+=document.documentElement.scrollTop),a.style.top=l+"px";var p=50-e;p<5&&(p=5),p>95&&(p=95),document.querySelector("#nodePopover .arrow").style.left=p+"%"}}function CSTPathway(){function e(){n.normalizeCoordinates();var e=g+b+y,t=v+I+f;Math.floor(A/E)===Math.floor(e/E)&&Math.floor(_/E)===Math.floor(t/E)||(A=e,_=t,s.css("left",A+"px"),s.css("top",_+"px"),c.css("left",A+"px"),c.css("top",_+"px"),nodePopover.repositionPopover())}function t(e){k=e/ORIGINAL_WIDTH;var t=k*ORIGINAL_HEIGHT;r.css("width",e+"px"),r.css("height",t+"px"),n.setScale(DEFAULT_SCALE),n.isMobileOrTabletDevice()?r.addClass("overlayed"):e==ORIGINAL_WIDTH?r.removeClass("overlayed"):r.addClass("overlayed"),nodePopover.closePopover()}function o(){window.scrollTo(0,0)}var n=this,a=$('[data-template="content-page-header"]'),i=$("#cst-wrapper"),s=$("#cst-wrapper .wrapper"),r=$("#cst-wrapper .wrapper-parent"),c=$("#cst-wrapper .wrapper-node-selected"),l=r.find(".pathway-buttons div i.cstf-arrow-left").parent(),d=r.find(".pathway-buttons div i.cstf-arrows-alt").parent(),p=r.find(".pathway-buttons div i.cstf-minus").parent(),u=r.find(".pathway-buttons div i.cstf-plus").parent(),m=new Hammer(document.querySelector("#cst-wrapper .wrapper-parent"),{domEvents:!0}),h=$("#pathway-copyright"),w={isFirst:!0,currentScale:1},g=0,v=0,y=0,f=0,b=0,I=0,A=0,_=0,E=5,T=DEFAULT_SCALE,H=MIN_ZOOM,k=DEFAULT_SCALE,M=!1;n.setScale=function(t){M&&(t==DEFAULT_SCALE?(b=0,I=0):(b+=-(t*k*ORIGINAL_WIDTH-T*k*ORIGINAL_WIDTH)/2,I+=-(t*k*ORIGINAL_HEIGHT-T*k*ORIGINAL_HEIGHT)/2)),T=t,s.css("transform","scale("+T*k+")"),c.css("transform","scale("+T*k+")"),e()},n.normalizeCoordinates=function(e,t){var o=g+b+y,n=v+I+f,a=T*k*ORIGINAL_WIDTH-.5*window.innerWidth,i=T*k*ORIGINAL_HEIGHT-.5*window.innerHeight;o<0&&-o>a&&(y+=-o-a),o>0&&o>.5*window.innerWidth&&(y-=o-.5*window.innerWidth),n<0&&-n>i&&(f+=-n-i),n>0&&n>.5*window.innerHeight&&(f-=n-.5*window.innerHeight),0==y&&0==f||!d.hasClass("disabled")||d.removeClass("disabled")},n.zoomMobile=function(){M=!0,window.addEventListener("scroll",o),o(),m.get("pan").set({enable:!0}),m.get("pinch").set({enable:!0}),r.addClass("zoomed"),a.addClass("fixed"),h.addClass("fixed"),n.zoomResetButton()},n.zoomMobileOut=function(){M=!1,window.removeEventListener("scroll",o),m.get("pan").set({enable:!1}),m.get("pinch").set({enable:!1}),r.removeClass("zoomed"),a.removeClass("fixed"),h.removeClass("fixed"),r.removeClass("node-selected"),g=0,v=0,b=0,I=0,y=0,f=0,n.updateSize(!0)},n.zoomPlusButton=function(){n.setZoom(H+1)},n.zoomMinusButton=function(){n.setZoom(H-1)},n.setZoom=function(e){H=e>MAX_ZOOM?MAX_ZOOM:e<MIN_ZOOM?MIN_ZOOM:e,n.setScale(Math.pow(SCALE_CONST,H)),H==MIN_ZOOM&&(p.addClass("disabled"),u.removeClass("disabled"),0==y&&0==f&&d.addClass("disabled")),H==MAX_ZOOM&&(u.addClass("disabled"),p.removeClass("disabled"),d.removeClass("disabled")),H>MIN_ZOOM&&H<MAX_ZOOM&&(p.removeClass("disabled"),u.removeClass("disabled"),d.removeClass("disabled"))},n.zoomResetButton=function(){var e=window.innerWidth,t=window.innerHeight-NAVBAR_HEIGHT-HEADER_HEIGHT-FOOTER_HEIGHT;k=e<t?e/ORIGINAL_WIDTH:t/ORIGINAL_HEIGHT,g=(e-k*ORIGINAL_WIDTH)/2,v=(t-k*ORIGINAL_HEIGHT)/2+NAVBAR_HEIGHT+HEADER_HEIGHT,b=0,I=0,y=0,f=0,n.setZoom(MIN_ZOOM)},n.updateSize=function(e){if(!M){var o=i.width();o<ORIGINAL_WIDTH?(!0===e||Math.abs(o-r.width())>20)&&t(o):t(ORIGINAL_WIDTH)}},n.isZoomedMode=function(){return M},n.isMobileOrTabletDevice=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},n.init=function(){$("#cst-wrapper .overlay-button").find("button").on("click",function(){n.zoomMobile()}),l.on("click",n.zoomMobileOut),d.on("click",n.zoomResetButton),p.on("click",n.zoomMinusButton),u.on("click",n.zoomPlusButton),n.updateSize(),m.get("pan").set({direction:Hammer.DIRECTION_ALL}),m.get("pan").set({enable:!1}),m.on("pan",function(t){1==w.isFirst?(w.xDrag=y,w.yDrag=f,w.isFirst=!1):1==t.isFinal&&(w.isFirst=!0),y=w.xDrag+t.deltaX,f=w.yDrag+t.deltaY,e()}),m.on("pinch",function(e){var t=100*w.currentScale,o=100*e.scale;Math.floor(t/20)<Math.floor(o/20)&&(w.currentScale=e.scale,n.zoomPlusButton()),Math.floor(t/20)>Math.floor(o/20)&&(w.currentScale=e.scale,n.zoomMinusButton())})}}var MAX_ZOOM=5,MIN_ZOOM=0,DEFAULT_SCALE=1,SCALE_CONST=1.2457309396155174,HEADER_HEIGHT=60,NAVBAR_HEIGHT=51,FOOTER_HEIGHT=60,_bgCode="UHJvcGVydHkgb2YgQ2VsbCBTaWduYWxpbmcgVGVjaG5vbG9neSwgSW5jLg==",_scale=.8,ORIGINAL_WIDTH=560,ORIGINAL_HEIGHT=518,cstpathway;document.addEventListener("DOMContentLoaded",function(e){nodePopover=new NodePopover,nodePopover.init(),cstpathway=new CSTPathway,cstpathway.init();var t=$("#pathway-wrapper").data();_scale=t.scale,loadXMLDoc(t.xmlUrl,t.pathwayId),$(window).on("resize",function(){cstpathway.updateSize()}),$('[data-toggle="popover"]').popover(),$("#pathway-copyright").prepend((new Date).getFullYear()),$("#nodePopover").bind("touchstart",function(e){var t=e.timeStamp,o=$(this).data("lastTouch")||t,n=t-o,a=e.originalEvent.touches.length;$(this).data("lastTouch",t),!n||n>500||a>1||(e.preventDefault(),$(this).trigger("click").trigger("click"))})});var doubleTouchStartTimestamp=0;document.addEventListener("touchstart",function(e){var t=+new Date;doubleTouchStartTimestamp+600>t&&e.preventDefault(),doubleTouchStartTimestamp=t});